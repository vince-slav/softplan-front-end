<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link rel="canonical" href="https://getbootstrap.com/docs/4.6/examples/product/">
    <link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet">

    <link href="../assets/css/main.css" rel="stylesheet">
</head>

<body>
    <nav class="site-header sticky-top py-1">
        <div class="container d-flex flex-column flex-md-row justify-content-between">
            </a>
            <a class="py-2 d-none d-md-inline-block" href="listar.html">Listar Usuários</a>
            <a class="py-2 d-none d-md-inline-block" href="index.html">Home</a>
            <a class="py-2 d-none d-md-inline-block" href="#">Buscar Usuário</a>
        </div>
    </nav>
    <div class="container" style="margin-top: 50px;">
        <div class="card card-login mx-auto mt-5"
            style="width: 100%; border-radius: 15px; box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.1) ;">
            <div class="card-header bg-secondary"
                style="box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.2); border-bottom: none;">
                <h4 class="text-light text-center">Cadastro de novo usuário</h4>
            </div>
            <div class="card-body">
                <form id="form-insert-user" method="POST" action="">
                    <div class="form-row">
                        <div class="col-md-6 mb-3">
                            <label for="validationServer01">Nome completo</label>
                            <input type="text" class="form-control " name="name" id="validationServer01" value=""
                                required>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="validationServer02">E-mail</label>
                            <input type="email" class="form-control" name="email" id="validationServer02" value=""
                                required>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="validationServer03">Data de nascimento</label>
                            <input type="date" class="form-control" id="validationServer03"
                                aria-describedby="validationServer03Feedback" name="birthDate" required>
                            <div id="validationServer03Feedback" class="invalid-feedback">
                                Por favor, insira um data válida.
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-md-3 mb-3">
                            <label for="validationServer04">País</label>
                            <<input type="date" class="form-control" id="validationServer03"
                                aria-describedby="validationServer03Feedback" name="nationality">
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="validationServer03">Naturalidade</label>
                            <input type="text" class="form-control " id="validationServer03"
                                aria-describedby="validationServer03Feedback" placeholder="Ex. Aracaju/SE" required>
                            <div id="validationServer03Feedback" name="naturalness" class="invalid-feedback">
                                Please provide a valid city.
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="validationServer04">Sexo</label>
                            <select class="custom-select" id="validationServer04" name="sex"
                                aria-describedby="validationServer04Feedback" required>
                                <option value="1">Masculino</option>
                                <option value="2">Feminino</option>
                            </select>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="validationServer05">CPF</label>
                            <input type="text" class="form-control cpf" id="validationServer05"
                                aria-describedby="validationServer05Feedback" name="cpf" required>
                            <div id="validationServer05Feedback" class="invalid-feedback">
                                CPF inválido.
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-12" style="text-align: right;">
                        <button class="btn btn-secondary" type="submit">Finalizar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <!-- SRIPTS  -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"
        integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF"
        crossorigin="anonymous"></script>

    <script defer>
        fetch('https://servicodados.ibge.gov.br/api/v1/localidades/paises')
            .then((resp) => resp.json())
            .then((data) => {
                data.forEach(country => {
                    document.getElementById('data-country').innerHTML(country.nome);
                });
            });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"
        integrity="sha512-pHVGpX7F/27yZ0ISY+VVjyULApbDlD0/X0rgGbTqCE7WFW5MezNTWG/dnhtbBuICzsd0WQPgpE4REBLv+UqChw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        $(".cpf").mask("000.000.000-00");
    </script>

    <script defer>
        $(document).ready(function () {
            $.ajax({
                url: 'https://servicodados.ibge.gov.br/api/v1/localidades/paises',
                success: function (resp) {
                    $.each(resp, function (index, item) {
                        $('.country-list').append(resp.nome);
                    });
                },
                error: function (err) {
                    console.error(err);
                }
            })

            $('form-insert-user').on('submit', function (event) {
                event.preventDefault();
                let data = {}
                $.each($(this).serializeArray(), function (index, item) {
                    data[item.name] = item.value;
                })
                $.post('http://localhost:8080/users', $(this).serializeArray(data));
            })

        })
    </script>

    <script>

        // fetch('https://servicodados.ibge.gov.br/api/v1/localidades/paises')
        //     .then((resp) => resp.json())
        //     .then((data) => {
        //         data.forEach(country => {
        //             document.getElementById('data-country').innerHTML(country.nome);
        //         });
        //     });
    </script>

</body>

</html>